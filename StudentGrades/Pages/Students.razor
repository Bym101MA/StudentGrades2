@page "/students"
@using StudentGrades.Data
@inject AppDbContext Db

<h3>Студенты</h3>

<EditForm Model="student" OnValidSubmit="AddStudent">
    <InputText @bind-Value="student.LastName" placeholder="Фамилия" class="form-control my-1" />
    <InputText @bind-Value="student.FirstName" placeholder="Имя" class="form-control my-1" />
    <InputText @bind-Value="student.Patronymic" placeholder="Отчество" class="form-control my-1" />
    <button type="submit" class="btn btn-primary mt-1">Добавить студента</button>
</EditForm>

<table class="table mt-3">
    <thead>
        <tr><th>ФИО</th></tr>
    </thead>
    <tbody>
        @foreach (var s in Db.Students)
        {
            <tr><td>@s.FullName</td></tr>
        }
    </tbody>
</table>

@code {
    private Student student = new Student();

    private void AddStudent()
    {
        Db.Students.Add(student);
        Db.SaveChanges();
        student = new Student();
    }
}
