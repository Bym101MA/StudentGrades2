@page "/subjects"
@using StudentGrades.Data
@using StudentGrades.Models
@inject AppDbContext Db

<h3>Предметы</h3>

<EditForm Model="subject" OnValidSubmit="AddSubject">
    <InputText @bind-Value="subject.Name" placeholder="Название предмета" class="form-control my-1" />
    <button type="submit" class="btn btn-primary mt-1">Добавить предмет</button>
</EditForm>

<table class="table mt-3">
    <thead><tr><th>Название</th></tr></thead>
    <tbody>
        @foreach (var s in Db.Subjects)
        {
            <tr><td>@s.Name</td></tr>
        }
    </tbody>
</table>

@code {
    private Subject subject = new Subject();

    private void AddSubject()
    {
        Db.Subjects.Add(subject);
        Db.SaveChanges();
        subject = new Subject();
    }
}
