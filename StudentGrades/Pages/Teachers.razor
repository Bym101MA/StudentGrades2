@page "/teachers"
@using StudentGrades.Data
@inject AppDbContext Db

<h3>Преподаватели</h3>

<EditForm Model="teacher" OnValidSubmit="AddTeacher">
    <InputText @bind-Value="teacher.LastName" placeholder="Фамилия" class="form-control my-1" />
    <InputText @bind-Value="teacher.FirstName" placeholder="Имя" class="form-control my-1" />
    <InputText @bind-Value="teacher.Patronymic" placeholder="Отчество" class="form-control my-1" />
    <InputText @bind-Value="teacher.Position" placeholder="Должность" class="form-control my-1" />
    <button type="submit" class="btn btn-primary mt-1">Добавить преподавателя</button>
</EditForm>

<table class="table mt-3">
    <thead>
        <tr><th>ФИО</th><th>Должность</th></tr>
    </thead>
    <tbody>
        @foreach (var t in Db.Teachers)
        {
            <tr><td>@t.FullName</td><td>@t.Position</td></tr>
        }
    </tbody>
</table>

@code {
    private Teacher teacher = new Teacher();

    private void AddTeacher()
    {
        Db.Teachers.Add(teacher);
        Db.SaveChanges();
        teacher = new Teacher();
    }
}